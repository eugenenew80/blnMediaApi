<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="media-eug-87" failOnError="false" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropTable schemaName="apps" tableName="media_day_metering_data_oper"/>
        <dropSequence sequenceName="media_day_metering_data_oper_s" schemaName="apps" />
        <rollback/>
    </changeSet>

    <changeSet id="media-eug-88" failOnError="false" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropTable schemaName="apps" tableName="media_month_metering_data_oper"/>
        <dropSequence sequenceName="media_month_metering_data_oper_s" schemaName="apps" />
        <rollback/>
    </changeSet>

    <changeSet id="media-eug-89" failOnError="false" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropTable schemaName="apps" tableName="media_template_metering_reading"/>
        <dropSequence sequenceName="media_template_metering_reading_s" schemaName="apps" />
        <rollback/>
    </changeSet>

    <changeSet id="media-eug-90" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropColumn columnName="way_entering" schemaName="apps" tableName="media_doc_metering_reading_lines"/>
        <rollback>
            <addColumn schemaName="apps" tableName="media_doc_metering_reading_lines">
                <column name="way_entering" type="varchar(15)"/>
            </addColumn>
        </rollback>
    </changeSet>

    <changeSet id="media-eug-91" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropColumn columnName="way_entering" schemaName="apps" tableName="media_day_metering_balance_raw"/>
        <rollback>
            <addColumn schemaName="apps" tableName="media_day_metering_balance_raw">
                <column name="way_entering" type="varchar(15)"/>
            </addColumn>
        </rollback>
    </changeSet>

    <changeSet id="media-eug-92" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropColumn columnName="way_entering" schemaName="apps" tableName="media_hour_metering_data_raw"/>
        <rollback>
            <addColumn schemaName="apps" tableName="media_hour_metering_data_raw">
                <column name="way_entering" type="varchar(15)"/>
            </addColumn>
        </rollback>
    </changeSet>

    <changeSet id="media-eug-93" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropColumn columnName="way_entering" schemaName="apps" tableName="media_day_metering_data_raw"/>
        <rollback>
            <addColumn schemaName="apps" tableName="media_day_metering_data_raw">
                <column name="way_entering" type="varchar(15)"/>
            </addColumn>
        </rollback>
    </changeSet>

    <changeSet id="media-eug-94" logicalFilePath="path-independent" author="eugene" context="postgres">
        <dropColumn columnName="way_entering" schemaName="apps" tableName="media_month_metering_data_raw"/>
        <rollback>
            <addColumn schemaName="apps" tableName="media_month_metering_data_raw">
                <column name="way_entering" type="varchar(15)"/>
            </addColumn>
        </rollback>
    </changeSet>

    <changeSet id="media-eug-95" logicalFilePath="path-independent" author="eugene" context="postgres">
        <addColumn schemaName="apps" tableName="media_hour_metering_data_raw">
            <column name="metering_point_id" type="number" />
            <column name="meter_id"          type="number" />
        </addColumn>
    </changeSet>

    <changeSet id="media-eug-96" logicalFilePath="path-independent" author="eugene" context="postgres">
        <addColumn schemaName="apps" tableName="media_day_metering_data_raw">
            <column name="metering_point_id" type="number" />
            <column name="meter_id"          type="number" />
        </addColumn>
    </changeSet>

    <changeSet id="media-eug-97" logicalFilePath="path-independent" author="eugene" context="postgres">
        <addColumn schemaName="apps" tableName="media_month_metering_data_raw">
            <column name="metering_point_id" type="number" />
            <column name="meter_id"          type="number" />
        </addColumn>
    </changeSet>

    <changeSet id="media-eug-98" logicalFilePath="path-independent" author="eugene" context="postgres">
        <renameColumn
                      columnDataType="varchar(15)"
                      newColumnName="data_source"
                      oldColumnName="data_source_code"
                      schemaName="apps"
                      tableName="media_day_metering_balance_raw"/>
    </changeSet>

    <changeSet id="media-eug-99" logicalFilePath="path-independent" author="eugene" context="postgres">
        <renameColumn
                      columnDataType="varchar(15)"
                      newColumnName="data_source"
                      oldColumnName="data_source_code"
                      schemaName="apps"
                      tableName="media_hour_metering_data_raw"/>
    </changeSet>

    <changeSet id="media-eug-100" logicalFilePath="path-independent" author="eugene" context="postgres">
        <renameColumn
                      columnDataType="varchar(15)"
                      newColumnName="data_source"
                      oldColumnName="data_source_code"
                      schemaName="apps"
                      tableName="media_day_metering_data_raw"/>
    </changeSet>

    <changeSet id="media-eug-101" logicalFilePath="path-independent" author="eugene" context="postgres">
        <renameColumn
                      columnDataType="varchar(15)"
                      newColumnName="data_source"
                      oldColumnName="data_source_code"
                      schemaName="apps"
                      tableName="media_month_metering_data_raw"/>
    </changeSet>
</databaseChangeLog>
